"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6658],{58442:function(e,r,t){var n=t(64836);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29 5.7 12.7a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"}),"CheckCircleRounded");r.Z=s},36191:function(e,r,t){var n=t(64836);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded");r.Z=s},51182:function(e,r,t){var n=t(64836);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"}),"ErrorRounded");r.Z=s},37885:function(e,r,t){var n=t(64836);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M15.32 3H8.68c-.26 0-.52.11-.7.29L3.29 7.98c-.18.18-.29.44-.29.7v6.63c0 .27.11.52.29.71l4.68 4.68c.19.19.45.3.71.3h6.63c.27 0 .52-.11.71-.29l4.68-4.68c.19-.19.29-.44.29-.71V8.68c0-.27-.11-.52-.29-.71l-4.68-4.68c-.18-.18-.44-.29-.7-.29zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3zm0-4.3c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1z"}),"ReportRounded");r.Z=s},95490:function(e,r,t){t.d(r,{S:function(){return v}});var n=t(59499),i=t(4730),o=t(17674),s=t(70794),a=t(11288),c=t(17e3),u=t(13613),l=t(87899),d=t(31001),p=["data"];function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var v=function(e){var r=e.debtToken,t=e.amount,v=(0,u.z)().uiFlashLenderService,x=(0,l.Yh)((function(e){return[e.isMarketsReady,e.currentMarketData]})),h=(0,o.Z)(x,2),b=h[0],m=h[1],y=(0,c.a)({queryKey:[d.iP.FLASH_LENDER_FEE,m.chainId,null===r||void 0===r?void 0:r.underlyingAsset],queryFn:function(){return v.getFlashLenderFee(m,null===r||void 0===r?void 0:r.underlyingAsset,t)},enabled:Boolean(b&&(null===r||void 0===r?void 0:r.underlyingAsset)&&t),refetchInterval:d.g_,select:function(e){return r?(0,s.Z)(e.toString()).div((0,s.Z)(10).pow(null===r||void 0===r?void 0:r.decimals)).multipliedBy((0,s.Z)(r.priceInMarketReferenceCurrency).div((0,s.Z)(10).pow(a.$3))).toNumber():0}});return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({data:y.data||0},(0,i.Z)(y,p))}},92767:function(e,r,t){t.d(r,{p:function(){return p}});var n=t(90116),i=t(50029),o=t(17674),s=t(87794),a=t.n(s),c=t(67294),u=t(87899),l=t(77537),d=function(e){return new Promise((function(r,t){var n=!1,i=0;e.length||t(void 0),e.forEach((function(o){o.then((function(e){n||(n=!0,r(e))})).catch((function(){n||++i===e.length&&t()}))}))}))},p=function(){var e=(0,u.Yh)((function(e){return[e.currentMarketData]})),r=(0,o.Z)(e,1)[0],t=(0,l.Z)().provider;return(0,c.useCallback)(function(){var e=(0,i.Z)(a().mark((function e(o){var s,c,u,l,p,f,v,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.fn,c=o.args,u=r.addresses.FALLBACK_FLASHLOAN_PROVIDER,l=r.addresses.PREFERRED_FLASHLOAN_PROVIDERS,t){e.next=5;break}return e.abrupt("return",Promise.reject());case 5:return p=function(){var e=(0,i.Z)(a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.estimateGas(r);case 2:return n=e.sent,r.gasLimit=n.mul(115).div(100),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.prev=6,f=l.map((function(e){var r=s.apply(void 0,[e].concat((0,n.Z)(c)));return p(r)})),e.next=10,d(f);case 10:if(!(v=e.sent)){e.next=13;break}return e.abrupt("return",v);case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(6);case 17:return x=s.apply(void 0,[u].concat((0,n.Z)(c))),e.abrupt("return",p(x));case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(r){return e.apply(this,arguments)}}(),[t])}},16813:function(e,r,t){t.r(r),t.d(r,{ClaimFeesModal:function(){return _}});var n=t(59499),i=t(67294),o=t(8195),s=t(88543),a=t(32369),c=t(49501),u=t(51324),l=t(95490),d=t(21878),p=t(6751),f=t(61953),v=t(81138),x=t(72667),h=t(2802),b=t(85893),m=function(e){var r=e.token0,t=e.token1;return(0,b.jsxs)(f.Z,{sx:{pt:5},children:[(0,b.jsx)(v.Z,{sx:{mb:1},color:"text.tertiary",children:(0,b.jsx)(c.cC,{id:"Fees earned"})}),(0,b.jsxs)(f.Z,{sx:function(e){return{display:"flex",justifyContent:"space-between",p:3,border:"1px solid ".concat(e.palette.divider),borderRadius:"8px 8px 0 0",".MuiBox-root:last-of-type":{mb:0}}},children:[(0,b.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(x.T1,{symbol:r.iconSymbol,fontSize:"large"}),(0,b.jsxs)(f.Z,{sx:{pl:2,overflow:"hidden"},children:[(0,b.jsx)(v.Z,{variant:"h4",noWrap:!0,children:r.name}),(0,b.jsx)(f.Z,{sx:{p:{xs:"0",xsm:"2px 0px"}},children:(0,b.jsx)(v.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:r.symbol})})]})]}),(0,b.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"end"},children:[(0,b.jsx)(v.Z,{variant:"h4",noWrap:!0,children:(0,h.d)(r.fee)}),(0,b.jsxs)(v.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:["$",Math.round(100*r.marketReferenceCurrencyFee)/100]})]})]}),(0,b.jsxs)(f.Z,{sx:function(e){return{display:"flex",justifyContent:"space-between",p:3,border:"1px solid ".concat(e.palette.divider),borderTop:"unset",borderRadius:"0 0 8px 8px",".MuiBox-root:last-of-type":{mb:0}}},children:[(0,b.jsxs)(f.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(x.T1,{symbol:t.iconSymbol,fontSize:"large"}),(0,b.jsxs)(f.Z,{sx:{pl:2,overflow:"hidden"},children:[(0,b.jsx)(v.Z,{variant:"h4",noWrap:!0,children:t.name}),(0,b.jsx)(f.Z,{sx:{p:{xs:"0",xsm:"2px 0px"}},children:(0,b.jsx)(v.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:t.symbol})})]})]}),(0,b.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"end"},children:[(0,b.jsx)(v.Z,{variant:"h4",noWrap:!0,children:(0,h.d)(t.fee)}),(0,b.jsxs)(v.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:["$",Math.round(100*t.marketReferenceCurrencyFee)/100]})]})]})]})},y=t(77642),j=t(50029),O=t(17674),g=t(87794),w=t.n(g),P=t(72864),k=t(77537),Z=t(87899),S=t(39771),E=t(31001),C=t(92767),D=t(70574);function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var L=i.memo((function(e){var r=e.marketId,t=e.isWrongNetwork,n=e.positionAddress,s=e.noFees,a=e.feesCollected,u=e.disabled,l=(0,C.p)(),d=(0,o.vR)(),p=d.mainTxState,f=d.setMainTxState,v=d.setTxError,x=d.setGasLimit,h=(0,k.Z)().sendTx,m=(0,Z.Yh)((function(e){return[e.claimFees]})),y=(0,O.Z)(m,1)[0],g=function(){var e=(0,j.Z)(w().mark((function e(){var t,i,o,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&n&&!p.success){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,window.gtag("event","leverage_modal_claim_fees"),v(void 0),f(F(F({},p),{},{loading:!0})),e.next=8,l({fn:y,args:[r,n]});case 8:return t=e.sent,e.next=11,h(t);case 11:return i=e.sent,e.next=14,i.wait(1);case 14:return o=[P.queryClient.invalidateQueries({queryKey:[E.iP.POSITIONS]}),P.queryClient.invalidateQueries({queryKey:[E.iP.POSITIONS_DATA]}),P.queryClient.invalidateQueries({queryKey:[E.iP.LEVERAGED_POSITIONS]}),P.queryClient.invalidateQueries({queryKey:[E.iP.LEVERAGED_POSITIONS_DATA]})],e.next=17,Promise.all(o);case 17:f({txHash:i.hash,loading:!1,success:!0,value:a.toString()}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(2),s=(0,S.WG)(e.t0,S.aD.GAS_ESTIMATION,!1),v(s),f({txHash:void 0,loading:!1});case 25:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){if(r&&n&&!p.success){var e=function(){var e=(0,j.Z)(w().mark((function e(){var t,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({fn:y,args:[r,n]});case 2:i=e.sent,x((null===(t=i.gasLimit)||void 0===t?void 0:t.toString())||"0");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=setTimeout(e,500),i=setInterval(e,15e3);return function(){clearInterval(i),clearTimeout(t)}}}),[p.success]),(0,b.jsx)(D.v,{mainTxState:p,isWrongNetwork:t,requiresAmount:!0,preparingTransactions:!1,actionText:(0,b.jsx)(c.cC,{id:"Claim Fees"}),actionInProgressText:(0,b.jsx)(c.cC,{id:"Claiming Fees"}),handleAction:g,noFees:s,disabled:u})}));function R(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?R(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var I=i.memo((function(e){var r=e.enrichedPosition,t=e.positionAddress,n=e.isWrongNetwork,i=(0,o.vR)(),a=i.gasLimit,f=i.txError,v=i.mainTxState,x=i.setTxError,h=(0,l.S)({debtToken:r.debtToken,amount:r.debtWithoutDecimals}),j=h.data,O=h.isLoading,g=r.token0.marketReferenceCurrencyFee+r.token1.marketReferenceCurrencyFee,w={marketId:r.marketId,isWrongNetwork:n,positionAddress:t,feesCollected:g,noFees:g<=0,disabled:r.lowHealthFactor};return v.success?(0,b.jsx)(s.mf,{children:(0,b.jsx)(p.R,{action:(0,b.jsx)(c.cC,{id:"successfully claimed"}),prefix:"$",amount:v.value})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s.mf,{children:[(0,b.jsx)(m,{token0:r.token0,token1:r.token1}),(0,b.jsxs)(d.m6,{description:y.U,gasLimit:a,skipLoad:!0,children:[(0,b.jsx)(d.oD,{description:"Total fees earned",value:g,numberPrefix:"$"}),(0,b.jsx)(d.oD,{description:"Transaction fees",value:j,numberPrefix:"$",loading:O}),(0,b.jsx)(d.oD,{description:"Total fees claimed",value:g,numberPrefix:"$",loading:O})]}),r.lowHealthFactor&&(0,b.jsx)(u.Y,{variant:"warning",message:"Transaction is unavailable due to the low Heath Factor. Please close this position and open a new one."}),f&&(0,b.jsx)(u.Y,{variant:"error",txError:f,onClose:function(){return x(void 0)}})]}),(0,b.jsx)(s.Ys,{children:(0,b.jsx)(L,A({},w))})]})}));function M(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var _=function(){var e=(0,o.vR)(),r=e.type,t=e.args,i=e.close;return(0,b.jsx)(s.XC,{open:r===o.w8.ClaimFees,setOpen:i,children:(0,b.jsx)(a.o,{positionAddress:t.positionAddress,modernStyle:!0,title:"Claim fees",children:function(e){return(0,b.jsx)(I,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?M(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e))}})})}},77642:function(e,r,t){t.d(r,{U:function(){return n}});var n="Added amounts may be lower than displayed due to slippage, any differences will be refunded to wallet within the same transaction"},2802:function(e,r,t){t.d(r,{d:function(){return i}});var n=t(70794),i=function(e){if(!e)return"0";var r=(0,n.Z)(e);return r.abs().isLessThan(.1)?r.toFixed(8):r.abs().isLessThan(10)?r.toFixed(4):r.toFixed(2)}},56365:function(e,r,t){var n=t(67294);const i=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"}))}));r.Z=i}}]);
//# sourceMappingURL=6658.613a03be2788b0db.js.map