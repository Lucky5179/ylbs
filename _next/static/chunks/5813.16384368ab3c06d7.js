"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5813],{88543:function(e,r,t){t.d(r,{XC:function(){return v},mf:function(){return m},Ys:function(){return j},Rh:function(){return h}});var n=t(59499),o=t(4730),i=t(5506),a=t(1568),s=t(70918),c=t(61953),d=t(80562),l=t(81645),u=(t(67294),t(85893)),p=["open","setOpen","withCloseButton","contentMaxWidth","children"];function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v=function(e){var r=e.open,t=e.setOpen,n=e.withCloseButton,f=void 0===n||n,v=e.contentMaxWidth,h=void 0===v?420:v,g=e.children,b=(0,o.Z)(e,p),m=function(){return t(!1)};return(0,u.jsx)(a.Z,x(x({open:r,onClose:m,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",".MuiPaper-root":{outline:"none",borderRadius:"16px"}},onClick:function(e){e.stopPropagation()}},b),{},{children:(0,u.jsxs)(s.Z,{sx:{display:"grid",gridTemplateAreas:'"header" "content" "footer"',position:"relative",margin:"16px",overflowY:"hidden",width:"100%",maxWidth:{xs:"359px",xsm:"".concat(h,"px")},maxHeight:"calc(100vh - 20px)",py:6},children:[f&&(0,u.jsx)(c.Z,{sx:{position:"absolute",top:"24px",right:"50px",zIndex:5},children:(0,u.jsx)(d.Z,{sx:{borderRadius:"50%",p:0,minWidth:0,position:"fixed",bgcolor:"background.paper"},onClick:m,"data-cy":"close-button",children:(0,u.jsx)(l.Z,{sx:{fontSize:"28px",color:"grey[40]"},children:(0,u.jsx)(i.Z,{"data-cy":"CloseModalIcon"})})})}),g]})}))},h=function(e){var r=e.children,t=e.withDivider;return(0,u.jsx)(c.Z,{sx:{gridArea:"header",px:6,pb:4,borderBottom:t?"1px solid rgba(255, 255, 255, 0.08)":"unset"},children:r})};function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m=function(e){var r=e.children,t=e.sx;return(0,u.jsx)(c.Z,{sx:b({gridArea:"content",maxHeight:"calc(100vh - 140px)",position:"relative",overflowY:"auto",px:6},t),children:r})},j=function(e){var r=e.children;return(0,u.jsx)(c.Z,{sx:{gridArea:"footer",px:6,pt:2},children:r})}},66209:function(e,r,t){t.d(r,{Q:function(){return i}});var n=t(77537),o=t(46930);function i(e){var r=(0,o.f)().currentChainId,t=e||r;return{isWrongNetwork:(0,n.Z)().chainId!==t,requiredChainId:t}}},41764:function(e,r,t){t.d(r,{y:function(){return k}});var n=t(59499),o=t(50029),i=t(4730),a=t(17674),s=t(87794),c=t.n(s),d=t(96486),l=t(17e3),u=t(65216),p=t(13613),f=t(87899),x=t(31001),v=t(49486),h=t(71467),g=["data"];function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var j=[],k=function(e){var r=(0,h.HT)(),t=r.user,n=r.loading,s=(0,p.z)().uiPositionService,b=(0,f.Yh)((function(e){return[e.currentChainId,e.isMarketsReady,e.getCurrentChainMarketData()]})),k=(0,a.Z)(b,3),y=k[0],O=k[1],P=k[2],w=t.userERC1155ReservesData,C=e||w.map((function(e){return e.tokenId})),Z=(0,l.a)({queryKey:[x.iP.SUPPLIED_POSITIONS_DATA,y,C],queryFn:function(){var e=w.filter((function(e){return C.includes(e.tokenId)})).reduce((function(e,r){var t=function(e,r){return e.find((function(e){return e.addresses.positionWrapperAddress===(0,u.toChecksumAddress)(r)}))}(P,r.asset);if(t){var n=t.addresses.dataProviderAddress;e[n]?e[n].tokenIds.push(r.tokenId):e[n]={market:t,tokenIds:[r.tokenId]}}return e}),{}),r=(0,d.entries)(e).map((function(e){var r=(0,a.Z)(e,2),t=r[0],n=r[1],i=n.market,d=n.tokenIds,l=function(){var e=(0,o.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getPositionsData(y,t,d);case 2:return r=e.sent,e.abrupt("return",{market:i,marketResponse:r});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l()}));return Promise.all(r)},enabled:!n&&O,refetchInterval:x.g_,keepPreviousData:!0,select:function(e){return e.reduce((function(e,r){var t=r.market;return r.marketResponse.forEach((function(r){e.push(m(m({},r),{},{controlType:v.N3.ManualPosition,marketId:null===t||void 0===t?void 0:t.marketId,marketName:null===t||void 0===t?void 0:t.marketName,tokenId:r.tokenId.toNumber(),fee0:r.fee0.toString(),fee1:r.fee1.toString(),amount0:r.amount0.toString(),amount1:r.amount1.toString()}))})),e}),[])}}),I=Z.data,A=(0,i.Z)(Z,g);return m({data:I||j},A)}},92252:function(e,r,t){t.d(r,{D:function(){return f}});var n=t(49501),o=t(5506),i=t(52758),a=t(61953),s=t(81645),c=t(81138),d=t(68346),l=t(36667),u=t(8195),p=t(85893),f=function(e){var r=e.txError,t=(0,u.vR)().close;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mb:"92px"},children:[(0,p.jsx)(a.Z,{sx:{width:"48px",height:"48px",backgroundColor:"error.200",borderRadius:"50%",mt:14,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,p.jsx)(s.Z,{sx:{color:"error.main",fontSize:"32px"},children:(0,p.jsx)(o.Z,{})})}),(0,p.jsx)(c.Z,{sx:{mt:2},variant:"h2",children:(0,p.jsx)(n.cC,{id:"Transaction failed"})}),(0,p.jsx)(c.Z,{children:(0,p.jsx)(n.cC,{id:"You can report incident to our <0>Discord</0>.",components:{0:(0,p.jsx)(d.Z,{href:"https://discord.gg/ZvcHr8nkWQ"})}})}),(0,p.jsxs)(l.Z,{variant:"outlined",onClick:function(){return navigator.clipboard.writeText(r.rawError.message.toString())},size:"small",sx:{mt:6},children:[(0,p.jsx)(n.cC,{id:"Copy error text"}),(0,p.jsx)(s.Z,{sx:{ml:.5,fontSize:"12px"},children:(0,p.jsx)(i.Z,{})})]})]}),(0,p.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",mt:12},children:(0,p.jsx)(l.Z,{onClick:t,variant:"contained",size:"large",sx:{minHeight:"44px"},children:(0,p.jsx)(n.cC,{id:"Close"})})})]})}},32369:function(e,r,t){t.d(r,{o:function(){return w}});var n=t(67294),o=t(61953),i=t(70754),a=t(66209),s=t(8195),c=t(77537),d=t(63206),l=t(71709),u=t(98924),p=t(49486),f=t(89154),x=t(41764),v=t(52064),h=t(34275),g=t(87899),b=t(18528),m=t(71467),j=t(88543),k=t(69897),y=t(50468),O=t(92252),P=t(85893),w=function(e){var r,t=e.children,w=e.tokenId,C=e.suppliedTokenId,Z=e.positionAddress,I=e.title,A=e.modernStyle,D=e.controlType,S=(0,n.useRef)(),T=(0,c.Z)().readOnlyModeAddress,N=(0,s.vR)(),E=N.txError,R=N.mainTxState,F=(0,a.Q)(),M=F.isWrongNetwork,W=F.requiredChainId,z=(0,m.HT)(),H=z.reserves,_=z.loading,B=(0,v.q)(w?[w]:void 0).data,q=(0,x.y)(C?[C]:void 0).data,L=(0,f.F)(Z?[Z]:void 0).data,Y=(0,l.$)(Z?[Z]:void 0).data,Q=(0,g.Yh)((function(e){return D===p.N3.AlmPosition?(0,u.Aj)(e,Y):w?(0,u.Jc)(e,B):C?(0,u.Jc)(e,q):B?(0,u.Aj)(e,L):void 0})),J=null!==Q&&void 0!==Q&&Q.length?Q[0]:void 0,G=(0,b.v)({reserves:H,address:null===J||void 0===J?void 0:J.token0.underlyingAsset}),K=(0,b.v)({reserves:H,address:null===J||void 0===J?void 0:J.token1.underlyingAsset});J&&(S.current=J);var U=Boolean(Z&&D!==p.N3.AlmPosition),X=(0,h.v)({marketId:null===J||void 0===J?void 0:J.marketId,positions:Z?[Z]:void 0,enabled:U}),$=X.data,V=X.isLoading,ee=U&&V||_;return E&&E.blocking?(0,P.jsx)(O.D,{txError:E}):(0,P.jsxs)(P.Fragment,{children:[Boolean(I)&&(0,P.jsxs)(j.Rh,{withDivider:A,children:[A&&!R.success&&(0,P.jsx)(y.Z,{title:I,marketName:null===J||void 0===J?void 0:J.marketName,almMarketName:null===J||void 0===J||null===(r=J.almMarket)||void 0===r?void 0:r.marketName,tokenA:null===J||void 0===J?void 0:J.token0,tokenB:null===J||void 0===J?void 0:J.token1,fee:null===J||void 0===J?void 0:J.fee}),!A&&!R.success&&(0,P.jsx)(y.E,{title:I,symbol:J?"".concat(J.token0.symbol," / ").concat(J.token1.symbol):void 0,sx:{mb:0}}),M&&!T&&(0,P.jsx)(k.I,{networkName:(0,d.Mo)(W).name,chainId:W,sx:{mt:4,mb:-1}})]}),S.current&&!ee&&G&&K?t({enrichedPosition:S.current,configuredAutomationsData:$,isWrongNetwork:M,positionAddress:Z,suppliedTokenId:C,tokenId:w,tokenA:G,tokenB:K}):(0,P.jsx)(o.Z,{sx:{minHeight:"400px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,P.jsx)(i.Z,{})})]})}},70574:function(e,r,t){t.d(r,{v:function(){return g}});var n=t(59499),o=t(4730),i=t(49501),a=t(61953),s=t(36667),c=t(70754),d=t(81138),l=t(8195),u=t(77537),p=t(39771),f=t(85893),x=["actionInProgressText","actionText","handleAction","isWrongNetwork","mainTxState","preparingTransactions","requiresAmount","variantPositive","fetchingData","disabled","disabledLoading","errorParams","chooseLeverage","noFees","sx"];function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g=function(e){var r=e.actionInProgressText,t=e.actionText,n=e.handleAction,v=e.isWrongNetwork,g=e.mainTxState,j=e.preparingTransactions,k=(e.requiresAmount,e.variantPositive),y=void 0===k||k,O=e.fetchingData,P=void 0!==O&&O,w=e.disabled,C=e.disabledLoading,Z=e.errorParams,I=e.chooseLeverage,A=e.noFees,D=e.sx,S=(0,o.Z)(e,x),T=(0,l.vR)().txError,N=(0,u.Z)().readOnlyModeAddress;var E=((null===T||void 0===T?void 0:T.txAction)===p.aD.GAS_ESTIMATION||(null===T||void 0===T?void 0:T.txAction)===p.aD.MAIN_ACTION)&&null!==T&&void 0!==T&&T.actionBlocked||A?Z||{loading:!1,disabled:!0,content:t}:v?{disabled:!0,content:(0,f.jsx)(i.cC,{id:"Wrong Network"})}:P?{disabled:!0,content:(0,f.jsx)(i.cC,{id:"Fetching data..."})}:j?{disabled:!0,loading:!0}:I?{disabled:!0,content:(0,f.jsx)(i.cC,{id:"Choose Leverage"})}:null!==g&&void 0!==g&&g.loading&&!C?{loading:!0,disabled:!0,content:r}:{content:t,handleClick:n},R=E.content,F=E.disabled,M=E.loading,W=E.handleClick;return(0,f.jsxs)(a.Z,h(h({sx:h({display:"flex",flexDirection:"column",mt:4},D)},S),{},{children:[(0,f.jsxs)(s.Z,{variant:"contained",disabled:F||w||void 0!==N,onClick:W,size:"large",sx:y?b:m,children:[M&&!C&&(0,f.jsx)(c.Z,{color:"inherit",size:"16px",sx:{mr:2}}),R]}),N&&(0,f.jsx)(d.Z,{variant:"helperText",color:"warning.main",sx:{textAlign:"center",mt:2},children:(0,f.jsx)(i.cC,{id:"Read-only mode. Connect to a wallet to perform transactions."})})]}))},b={minHeight:"44px",backgroundColor:"#AFF113",color:"#074245","&:disabled":{color:"#074245",backgroundColor:"#AFF113",opacity:"0.5"},"&:hover":{backgroundColor:"#cafc53"}},m={minHeight:"44px",color:"#F1F1F3",border:"1px solid var(--stroke-6, rgba(255, 255, 255, 0.06))",backgroundColor:"#2A2A32","&:hover":{backgroundColor:"#363641",border:"1px solid var(--stroke-6, rgba(255, 255, 255, 0.08))"}}}}]);
//# sourceMappingURL=5813.16384368ab3c06d7.js.map