"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9816],{71709:function(e,t,r){r.d(t,{$:function(){return E}});var n=r(59499),o=r(50029),a=r(4730),i=r(17674),s=r(87794),u=r.n(s),c=r(96486),d=r(17e3),p=r(65216),f=r(91747),l=r(13613),v=r(87899),O=r(31001),b=r(49486),P=r(46930),m=r(77537),g=["data"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var y=[],h=function(){var e=(0,o.Z)(u().mark((function e(t,r,n){var o,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o="".concat(n,"/leverage/erc20_positions/").concat(t,"?chain_id=").concat(r),e.next=4,fetch(o);case 4:return a=e.sent,e.next=7,a.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,P.f)().currentNetworkConfig,t=(0,m.Z)().currentAccount,r=(0,v.Yh)((function(e){return[e.currentChainId]})),o=(0,i.Z)(r,1)[0],s=e.yldrYpiUrl,u=(0,d.a)({queryFn:function(){return h(t,o,s)},queryKey:[O.iP.LEVERAGED_ERC20_POSITIONS,t,o],enabled:Boolean(t&&o),refetchInterval:O.hB}),c=u.data,p=(0,a.Z)(u,g);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({data:c||y},p)},j=r(73502),S=["data"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=[],E=function(e,t){var r=(0,v.Yh)((function(e){return[e.currentChainId,e.isAlmMarketsReady,e.getCurrentChainAlmMarketData()]})),n=(0,i.Z)(r,3),s=n[0],P=n[1],m=n[2],g=w(),k=g.data,y=g.isLoading,h=(0,l.z)().uiAlmLeveragePositionService,_=(0,j.ye)({chainId:s}).data,E=null!==e&&void 0!==e&&e.length?e:k.map((function(e){return e.position_address})),I=(0,d.a)({queryKey:[O.iP.LEVERAGED_ERC20_POSITIONS_DATA,s,E],queryFn:function(){var e=k.reduce((function(e,t){if(E.includes(t.position_address)){var r=function(e,t){return e.find((function(e){return e.addresses.leverageAddress===t}))}(m,t.leverage_contract_address);if(r){var n=r.addresses.leverageDataProviderAddress;e[n]?e[n].addresses.push(t.position_address):e[n]={almMarket:r,addresses:[t.position_address]}}}return e}),{}),t=(0,c.entries)(e).map((function(e){var t=(0,i.Z)(e,2),r=t[0],n=t[1],a=n.almMarket,c=n.addresses,d=function(){var e=(0,o.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getPositionsData(s,r,c);case 2:return t=e.sent,e.abrupt("return",{almMarket:a,addresses:c,marketResponse:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d()}));return Promise.all(t)},enabled:P&&!y,refetchInterval:O.g_,keepPreviousData:!Boolean(null===e||void 0===e?void 0:e.length),select:function(e){return e.reduce((function(e,r){var n=r.almMarket,o=r.addresses,a=r.marketResponse,i=_.find((function(e){return e.market.create_and_leverage_address===n.addresses.createAndLeverageAddress}));return a.forEach((function(r,a){return e.push(D(D({},r),{},{uniswapV3Position:{controlType:b.N3.AlmPosition,fee:0,tickLower:0,tickUpper:0,almMarket:{marketId:null===n||void 0===n?void 0:n.marketId,marketName:null===n||void 0===n?void 0:n.marketName},marketId:null===i||void 0===i?void 0:i.cl_market.id,marketName:null===i||void 0===i?void 0:i.cl_market.name,tokenId:0,token0:t?r.token1:r.token0,token1:t?r.token0:r.token1,fee0:"0",fee1:"0",amount0:t?r.amount1.toString():r.amount0.toString(),amount1:t?r.amount0.toString():r.amount1.toString(),tickCurrent:0,liquidity:f.O$.from(0),sqrtPriceX96:f.O$.from(0),vault:r.vault},debtAsset:(0,p.toChecksumAddress)(r.debtAsset),positionAddress:o[a],debt:r.debt.toString(),revenueFee0:"0",revenueFee1:"0",revenueFeePercent:"0"}))})),e}),[])}}),V=I.data,C=(0,a.Z)(I,S);return D({data:V||A},C)}},89154:function(e,t,r){r.d(t,{F:function(){return _}});var n=r(59499),o=r(50029),a=r(4730),i=r(17674),s=r(87794),u=r.n(s),c=r(96486),d=r(17e3),p=r(65216),f=r(13613),l=r(87899),v=r(31001),O=r(49486),b=r(46930),P=["data"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=[],k=function(){var e=(0,o.Z)(u().mark((function e(t,r,n){var o,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o="".concat(n,"/leverage/positions/").concat(t,"?chain_id=").concat(r),e.next=4,fetch(o);case 4:return a=e.sent,e.next=7,a.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,b.f)().currentNetworkConfig,t=(0,l.Yh)((function(e){return[e.account,e.currentChainId]})),r=(0,i.Z)(t,2),o=r[0],s=r[1],u=e.yldrYpiUrl,c=(0,d.a)({queryFn:function(){return k(o,s,u)},queryKey:[v.iP.LEVERAGED_POSITIONS,o,s],enabled:Boolean(o),refetchInterval:v.hB}),p=c.data,f=(0,a.Z)(c,P);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({data:p||g},f)},h=["data"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=[],_=function(e,t){var r=(0,l.Yh)((function(e){return[e.currentChainId,e.isMarketsReady,e.getCurrentChainMarketData()]})),n=(0,i.Z)(r,3),s=n[0],b=n[1],P=n[2],m=(0,f.z)().uiLeveragePositionService,g=y(),k=null!==e&&void 0!==e&&e.length?e:g.data.map((function(e){return e.position_address})),w=(0,d.a)({queryKey:[v.iP.LEVERAGED_POSITIONS_DATA,s,k],queryFn:function(){var e=g.data.reduce((function(e,t){if(k.includes(t.position_address)){var r=function(e,t){return e.find((function(e){return e.addresses.leverageAddress===t}))}(P,t.leverage_contract_address);if(r){var n=r.addresses.leverageDataProviderAddress;e[n]?e[n].addresses.push(t.position_address):e[n]={market:r,addresses:[t.position_address]}}}return e}),{}),t=(0,c.entries)(e).map((function(e){var t=(0,i.Z)(e,2),r=t[0],n=t[1],a=n.market,c=n.addresses,d=function(){var e=(0,o.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getPositionsData(s,r,c);case 2:return t=e.sent,e.abrupt("return",{market:a,addresses:c,marketResponse:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d()}));return Promise.all(t)},enabled:b&&!g.isLoading,refetchInterval:v.g_,keepPreviousData:!Boolean(null===e||void 0===e?void 0:e.length),select:function(e){return e.reduce((function(e,r){var n=r.market,o=r.addresses;return r.marketResponse.forEach((function(r,a){return e.push(j(j({},r),{},{uniswapV3Position:j(j({},r.uniswapV3Position),{},{controlType:O.N3.ManualPosition,marketId:null===n||void 0===n?void 0:n.marketId,marketName:null===n||void 0===n?void 0:n.marketName,tokenId:r.uniswapV3Position.tokenId.toNumber(),token0:t?r.uniswapV3Position.token1:r.uniswapV3Position.token0,token1:t?r.uniswapV3Position.token0:r.uniswapV3Position.token1,fee0:t?r.uniswapV3Position.fee1.toString():r.uniswapV3Position.fee0.toString(),fee1:t?r.uniswapV3Position.fee0.toString():r.uniswapV3Position.fee1.toString(),amount0:t?r.uniswapV3Position.amount1.toString():r.uniswapV3Position.amount0.toString(),amount1:t?r.uniswapV3Position.amount0.toString():r.uniswapV3Position.amount1.toString(),tickCurrent:r.uniswapV3Position.tickCurrent,sqrtPriceX96:r.uniswapV3Position.sqrtPriceX96}),debtAsset:(0,p.toChecksumAddress)(r.debtAsset),positionAddress:o[a],debt:r.debt.toString(),revenueFee0:t?r.revenueFee1.toString():r.revenueFee0.toString(),revenueFee1:t?r.revenueFee0.toString():r.revenueFee1.toString(),revenueFeePercent:r.revenueFeePercent.toString()}))})),e}),[])}}),_=w.data,D=(0,a.Z)(w,h);return j({data:_||S},D)}}}]);
//# sourceMappingURL=9816-15c541bd2cbe7347.js.map