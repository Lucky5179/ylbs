"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2921],{9279:function(e,t,n){n.d(t,{d:function(){return r}});const r="0x0000000000000000000000000000000000000000"},58442:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(64938)),i=n(85893),a=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29 5.7 12.7a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"}),"CheckCircleRounded");t.Z=a},36191:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(64938)),i=n(85893),a=(0,o.default)((0,i.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded");t.Z=a},51182:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(64938)),i=n(85893),a=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"}),"ErrorRounded");t.Z=a},37885:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(64938)),i=n(85893),a=(0,o.default)((0,i.jsx)("path",{d:"M15.32 3H8.68c-.26 0-.52.11-.7.29L3.29 7.98c-.18.18-.29.44-.29.7v6.63c0 .27.11.52.29.71l4.68 4.68c.19.19.45.3.71.3h6.63c.27 0 .52-.11.71-.29l4.68-4.68c.19-.19.29-.44.29-.71V8.68c0-.27-.11-.52-.29-.71l-4.68-4.68c-.18-.18-.44-.29-.7-.29zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3zm0-4.3c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1z"}),"ReportRounded");t.Z=a},37221:function(e,t,n){n.d(t,{h$:function(){return v},fq:function(){return m}});var r=n(75932),o=n(67294),i=n(77537),a=n(9279),s=n(39996),u=n(2658);function c(e,t,n){if(!(0,u.U)(e)||e===a.d)throw Error("Invalid 'address' parameter '".concat(e,"'."));return new s.CH(e,t,n)}var l=n(98260),d=n(48211),p=r.Mt;function f(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,i.Z)(),a=r.provider,s=r.chainId;return(0,o.useMemo)((function(){if(!e||!t||!a||!s)return null;var n;if(!(n="string"===typeof e?e:e[s]))return null;try{return c(n,t,a)}catch(r){return console.error("Failed to get contract",r),null}}),[e,t,a,s,n])}function v(){return f(l.yy,p,!1)}function m(){return function(e,t){var n=(0,i.Z)(),r=n.chainId,a=n.provider,s=r===d.a_.mainnet,u=f(s?e:void 0,t,!1);return(0,o.useMemo)((function(){if(s)return u;if(!e||!a)return null;try{return c(e,t,a)}catch(n){return console.error("Failed to get mainnet contract",n),null}}),[s,u,e,t])}(l.yy[d.a_.mainnet],p)}},76478:function(e,t,n){n.d(t,{U:function(){return i}});var r=n(98260),o=n(46930);function i(e){var t=(0,o.f)().currentChainId;return e?new r.WU(t,e.underlyingAsset,e.decimals,e.symbol,e.name):void 0}},26581:function(e,t,n){n.d(t,{$:function(){return u}});var r=n(81088),o=n(67294),i=n(6731),a=n(37221),s=n(20154);var u=function(){var e=(0,r.useWeb3React)().chainId,t=function(){var e,t,n,r=(0,a.h$)(),u=null===(e=(0,s.Wk)(r,"getCurrentBlockTimestamp"))||void 0===e||null===(t=e.result)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toString();return(0,o.useMemo)((function(){return"string"===typeof u?i.O$.from(u):void 0}),[u])}();return(0,o.useMemo)((function(){if(t)return t.add(3e4)}),[t,e])}},25389:function(e,t,n){n.d(t,{v:function(){return p}});var r=n(99675),o=n(98260),i=n(67294),a=n(2070),s=n(37221),u=n(77537),c=n(85893),l=(0,r.wn)();function d(e){switch(e){case o.a_.ARBITRUM_ONE:case o.a_.OPTIMISM:return 15;case o.a_.AVALANCHE:case o.a_.BNB:case o.a_.CELO:case o.a_.CELO_ALFAJORES:return 5;default:return 1}}function p(){var e=(0,u.Z)().chainId,t=(0,a.Ov)(),n=(0,a.qS)(),r=(0,s.h$)(),p=(0,s.fq)(),f=(0,i.useMemo)((function(){return{blocksPerFetch:d(e)}}),[e]),v=(0,i.useMemo)((function(){return{blocksPerFetch:d(o.a_.MAINNET)}}),[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Updater,{chainId:o.a_.MAINNET,latestBlockNumber:n,contract:p,listenerOptions:v}),e!==o.a_.MAINNET&&(0,c.jsx)(l.Updater,{chainId:e,latestBlockNumber:t,contract:r,listenerOptions:f})]})}},3102:function(e,t,n){var r,o;n.d(t,{M:function(){return r},g:function(){return o}}),function(e){e.LOWER="LOWER",e.UPPER="UPPER"}(r||(r={})),function(e){e.CURRENCY_A="CURRENCY_A",e.CURRENCY_B="CURRENCY_B"}(o||(o={}))},2658:function(e,t,n){n.d(t,{U:function(){return o}});var r=n(19485);function o(e){try{return(0,r.Kn)(e.toLowerCase())}catch(t){return!1}}},1036:function(e,t,n){n.d(t,{t:function(){return Z}});var r=n(59499),o=n(71383),i=n(70794),a=n(67294),s=n(37885),u=n(81719),c=n(61953),l=n(81138),d=n(72667),p=n(77537),f=n(96901),v=n(98260),m=[v.a_.BASE_GOERLI];var y,b=n(4730),x=n(95691),O=n(96486),g=n(85893),h=["value","onUserInput","placeholder","prependSymbol"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=x.ZP.input(y||(y=(0,o.Z)(["\n  pointer-events: ",";\n  width: 100%;\n  color: white;\n  text-align: left;\n  position: relative;\n  font-weight: 485;\n  outline: none;\n  border: none;\n  flex: 1 1 auto;\n  background-color: transparent;\n  font-size: ",";\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0;\n  -webkit-appearance: textfield;\n\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n\n  [type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  ::-webkit-outer-spin-button,\n  ::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n\n  ::placeholder {\n    color: ",";\n  }\n"])),(function(e){return e.disabled?"none":"auto"}),(function(e){var t=e.fontSize;return null!==t&&void 0!==t?t:"28px"}),(function(e){return e.theme.neutral3})),C=RegExp("^\\d*(?:\\\\[.])?\\d*$"),E=(0,a.forwardRef)((function(e,t){var n=e.value,r=e.onUserInput,o=e.placeholder,i=e.prependSymbol,a=(0,b.Z)(e,h),s=function(e){(""===e||C.test((0,O.escapeRegExp)(e)))&&r(e)},u=n;return(0,g.jsx)(k,j(j({},a),{},{ref:t,value:i&&n?i+u:u,onChange:function(e){if(i){var t=e.target.value,n=t.toString().includes(i)?t.toString().slice(i.length,t.toString().length+1):t;s(n.replace(/,/g,"."))}else s(e.target.value.replace(/,/g,"."))},inputMode:"decimal",autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*[.,]?[0-9]*$",placeholder:o||"0",minLength:1,maxLength:79,spellCheck:"false"}))}));E.displayName="Input";var R,w=a.memo(E);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=(0,u.ZP)(w)(R||(R=(0,o.Z)(["\n  font-size: 20px !important;\n  text-align: left;\n"]))),Z=function(e){var t=e.value,n=e.onUserInput,r=e.onMax,o=e.currency,a=e.fiatValue,u=e.loading,y=void 0!==u&&u,b=e.disableErrors,x=e.iconSymbol,O=e.disabled,h=e.sx,A=(0,p.Z)(),j=A.chainId,k=A.currentAccount,C=(0,f._h)(k,null!==o&&void 0!==o?o:void 0),E=function(e,t){return t&&e&&e in t?t[e]:!!e&&-1!==v.Gw.indexOf(e)&&-1===m.indexOf(e)}(j),R=(0,i.Z)(t||0).isZero()||(0,i.Z)(t).isLessThanOrEqualTo((null===C||void 0===C?void 0:C.toFixed())||0);return(0,g.jsxs)(c.Z,{children:[(0,g.jsxs)(c.Z,{sx:T({display:"flex",flexDirection:"column",gap:2,py:3,px:4,borderRadius:2,border:R?"1px solid rgba(255, 255, 255, 0.06)":"1px solid #FF0548",backgroundColor:"#26262B"},h),children:[(0,g.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(I,{className:"token-amount-input",value:t,onUserInput:n,disabled:!E||O,$loading:y}),(null===o||void 0===o?void 0:o.symbol)&&x&&(0,g.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,g.jsx)(d.T1,{symbol:x,fontSize:"medium"}),(0,g.jsx)(l.Z,{variant:"main19",children:o.symbol})]})]}),(0,g.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsxs)(l.Z,{variant:"main13",color:"text.secondary",children:["$",a||0]}),(0,g.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between",gap:1},children:[(0,g.jsxs)(l.Z,{variant:"main13",color:"text.secondary",children:["Wallet balance: ",null===C||void 0===C?void 0:C.toFixed(2)]}),r&&!O&&(0,g.jsx)(l.Z,{sx:{fontSize:"11px",fontWeight:"600",cursor:"pointer"},onClick:r,children:"MAX"})]})]})]}),!R&&!b&&(0,g.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:1,pt:1},children:[(0,g.jsx)(s.Z,{color:"error",sx:{width:"18px",height:"18px"}}),(0,g.jsx)(l.Z,{variant:"main13",sx:{color:"#FCB6C8"},children:"Insufficient funds to supply"})]})]})}},4710:function(e,t,n){n.d(t,{O:function(){return k}});var r=n(59499),o=n(50029),i=n(17674),a=n(87794),s=n.n(a),u=n(67294),c=n(61953),l=n(36667),d=n(70754),p=n(33896),f=n(87899),v=n(77537),m=n(72667),y=n(8195),b=n(39771),x=n(78934),O=n(82482),g=n(48321),h=n(85893);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=e.marketId,n=e.poolAddress,r=e.tokenA,o=e.tokenB,i=e.approvedAmountA,a=e.approvedAmountB,s=e.amountToSupplyA,u=e.amountToSupplyB,l=e.setApprovedAmountA,d=e.setApprovedAmountB,p=e.requiresApprovalA,f=e.requiresApprovalB,v=e.setRequiresApprovalA,m=e.setRequiresApprovalB,y=e.isIncreaseLiquidity;return(0,h.jsxs)(c.Z,{sx:{mb:6},children:[(0,h.jsx)(C,{marketId:t,poolAddress:n,token:r,approvedAmount:i,amountToSupply:s,setApprovedAmount:l,requiresApproval:p,setRequiresApproval:v,isIncreaseLiquidity:y}),(0,h.jsx)(C,{marketId:t,poolAddress:n,token:o,approvedAmount:a,amountToSupply:u,setApprovedAmount:d,requiresApproval:f,setRequiresApproval:m,isIncreaseLiquidity:y})]})},C=function(e){var t,n=e.marketId,a=e.poolAddress,A=e.token,k=e.approvedAmount,C=e.amountToSupply,E=e.setApprovedAmount,R=e.requiresApproval,w=e.setRequiresApproval,P=e.isIncreaseLiquidity,T=(0,v.Z)().sendTx,I=(0,y.vR)(),Z=I.setTxError,_=I.setMainTxState,S=I.mainTxState,B=(0,f.Yh)((function(e){return[e.getPoolApprovedAmount,e.generatePositionApproval,e.estimateGasLimit,e.currentMarketData]})),L=(0,i.Z)(B,4),N=L[0],D=L[1],M=L[2],U=L[3],q=(0,O.P)(U).walletBalances,F=(0,u.useCallback)(function(){var e=(0,o.Z)(s().mark((function e(t){var r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=2;break}return e.abrupt("return");case 2:if(!n||k&&!t){e.next=7;break}return e.next=5,N({marketId:n,poolAddress:a,token:null===A||void 0===A?void 0:A.underlyingAsset,isIncreaseLiquidity:P});case 5:r=e.sent,E(r);case 7:k&&(o=(0,g.iv)({approvedAmount:k.amount,amount:(0,x.p)(C,A.decimals).toString(),signedAmount:"0"}),w(o));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,C.toString(),N]),Y=function(){var e=(0,o.Z)(s().mark((function e(){var t,n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(R&&k&&null!==A&&void 0!==A&&A.underlyingAsset)){e.next=15;break}return _(j(j({},S),{},{loading:!0,approvingToken:A.symbol})),t=q[null===A||void 0===A?void 0:A.underlyingAsset.toLowerCase()].amountWithDecimals,e.next=6,M(D(j(j({},k),{},{amount:t||p.ke})));case 6:return n=e.sent,e.next=9,T(n);case 9:return r=e.sent,e.next=12,r.wait(1);case 12:return e.next=14,F(!0);case 14:_({loading:!1});case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),o=(0,b.WG)(e.t0,b.aD.GAS_ESTIMATION,!1),Z(o),_({loading:!1});case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),z=S.loading&&S.approvingToken===(null===A||void 0===A?void 0:A.symbol);return(0,u.useEffect)((function(){F()}),[F,null===A||void 0===A?void 0:A.symbol,C.toString()]),A?(0,h.jsxs)(c.Z,{sx:(t={display:"flex",justifyContent:"space-between",alignContent:"center",py:2,pl:4,pr:2,border:"1px solid rgba(255, 255, 255, 0.06)"},(0,r.Z)(t,"&:first-child",{borderRadius:"8px 8px 2px 2px",mb:1}),(0,r.Z)(t,"&:last-child",{borderRadius:"2px 2px 8px 8px"}),t),children:[(0,h.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,h.jsx)(m.T1,{symbol:A.iconSymbol,fontSize:"small"}),A.symbol]}),(0,h.jsx)(l.Z,{variant:"contained",disabled:!R||z,onClick:Y,startIcon:z&&(0,h.jsx)(d.Z,{size:"16px"}),children:"Approve"})]}):null}},60520:function(e,t,n){n.r(t),n.d(t,{AddLiquidityModal:function(){return W}});var r=n(59499),o=n(67294),i=n(8195),a=n(25389),s=n(88543),u=n(32369),c=n(49501),l=n(70794),d=n(81138),p=n(61953),f=n(1036),v=n(18528),m=n(76478),y=n(71467),b=n(96901),x=n(77537),O=n(3102),g=n(51324),h=n(21878),A=n(6751),j=n(77642),k=n(50029),C=n(17674),E=n(87794),R=n.n(E),w=n(91747),P=n(72864),T=n(87899),I=n(39771),Z=n(31001),_=n(4710),S=n(26581),B=n(70574),L=n(85893);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=o.memo((function(e){var t=e.enrichedPosition,n=e.isWrongNetwork,r=e.tokenA,a=e.tokenB,s=e.amountToIncreaseA,u=e.amountToIncreaseB,l=(0,o.useState)(),d=l[0],f=l[1],v=(0,o.useState)(),m=v[0],y=v[1],b=(0,o.useState)(!1),O=b[0],g=b[1],h=(0,o.useState)(!1),A=h[0],j=h[1],E=(0,i.vR)(),N=E.mainTxState,M=E.setMainTxState,U=E.setTxError,q=E.setGasLimit,F=(0,x.Z)().sendTx,Y=(0,S.$)(),z=(0,T.Yh)((function(e){return[e.increaseLiquidity,e.estimateGasLimit]})),W=(0,C.Z)(z,2),$=W[0],H=W[1],V=s,G=u,K=V.multipliedBy(.995),Q=G.multipliedBy(.995),J=G.isZero()&&V.isZero()||O||A,X=function(){var e=(0,k.Z)(R().mark((function e(){var n,r,o,i,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.marketId||!Y||G.isZero()&&V.isZero()||Q.isZero()&&K.isZero()||O||A||N.success)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,window.gtag("event","leverage_modal_add_liquidity"),U(void 0),M(D(D({},N),{},{loading:!0})),n={tokenId:w.O$.from(t.tokenId),amount0Desired:w.O$.from(V.toFixed(0)),amount1Desired:w.O$.from(G.toFixed(0)),amount0Min:w.O$.from(K.toFixed(0)),amount1Min:w.O$.from(Q.toFixed(0)),deadline:Y},r=$(t.marketId,n),e.next=10,H(r);case 10:return o=e.sent,e.next=13,F(o);case 13:return i=e.sent,e.next=16,i.wait(1);case 16:M({txHash:i.hash,loading:!1,success:!0}),P.queryClient.invalidateQueries({queryKey:[Z.iP.POSITIONS]}),P.queryClient.invalidateQueries({queryKey:[Z.iP.POSITIONS_DATA]}),P.queryClient.invalidateQueries({queryKey:[Z.iP.LEVERAGED_POSITIONS]}),P.queryClient.invalidateQueries({queryKey:[Z.iP.LEVERAGED_POSITIONS_DATA]}),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(2),a=(0,I.WG)(e.t0,I.aD.GAS_ESTIMATION,!1),U(a),M({txHash:void 0,loading:!1});case 28:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=function(){var e=(0,k.Z)(R().mark((function e(){var n,r,o,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.marketId||!Y||G.isZero()&&V.isZero()||Q.isZero()&&K.isZero()||O||A||N.success)){e.next=2;break}return e.abrupt("return");case 2:return r={tokenId:w.O$.from(t.tokenId),amount0Desired:w.O$.from(V.toFixed(0)),amount1Desired:w.O$.from(G.toFixed(0)),amount0Min:w.O$.from(K.toFixed(0)),amount1Min:w.O$.from(Q.toFixed(0)),deadline:Y},o=$(t.marketId,r),e.next=6,H(o);case 6:i=e.sent,q((null===(n=i.gasLimit)||void 0===n?void 0:n.toString())||"0");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=setTimeout(e,500),r=setInterval(e,15e3);return function(){clearInterval(r),clearTimeout(n)}}),[N.success,V.toFixed(0),G.toFixed(0),K.toFixed(0),Q.toFixed(0),O,A,Y]),(0,L.jsxs)(p.Z,{sx:{mt:4},children:[(0,L.jsx)(_.O,{marketId:t.marketId,tokenA:r,tokenB:a,amountToSupplyA:s,amountToSupplyB:u,approvedAmountA:d,approvedAmountB:m,setApprovedAmountA:f,setApprovedAmountB:y,requiresApprovalA:O,requiresApprovalB:A,setRequiresApprovalA:g,setRequiresApprovalB:j,isIncreaseLiquidity:!0}),(0,L.jsx)(B.v,{mainTxState:N,isWrongNetwork:n,requiresAmount:!0,preparingTransactions:!1,actionText:(0,L.jsx)(c.cC,{id:"Add liquidity"}),actionInProgressText:(0,L.jsx)(c.cC,{id:"Adding liquidity"}),handleAction:X,disabled:J})]})})),U=function(e,t,n){var r=(0,l.O)(e.token0.marketReferenceCurrencyValue).div(e.token1.marketReferenceCurrencyValue);return n===O.g.CURRENCY_A&&r.isFinite()&&t?e.poolPrice.isLessThanOrEqualTo(e.lowerPosition)?"0":(0,l.O)(t).multipliedBy(e.token1.priceInMarketReferenceCurrency).multipliedBy(r).div(e.token0.priceInMarketReferenceCurrency).decimalPlaces(12).toFixed():n===O.g.CURRENCY_B&&r.isFinite()&&t?e.poolPrice.isGreaterThanOrEqualTo(e.upperPosition)?"0":(0,l.O)(t).multipliedBy(e.token0.priceInMarketReferenceCurrency).div(r).div(e.token1.priceInMarketReferenceCurrency).decimalPlaces(12).toFixed():void 0};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=o.memo((function(e){var t,n,a,u,k=e.enrichedPosition,C=e.isWrongNetwork,E=(0,o.useState)(O.g.CURRENCY_A),R=E[0],w=E[1],P=(0,o.useState)(""),T=P[0],I=P[1],Z=(0,o.useState)(""),_=Z[0],S=Z[1],B=(0,i.vR)(),N=B.gasLimit,D=B.txError,q=B.mainTxState,Y=B.setTxError,z=(0,y.HT)().reserves,W=(0,x.Z)().currentAccount,$=(0,v.v)({reserves:z,address:k.token0.underlyingAsset}),H=(0,v.v)({reserves:z,address:k.token1.underlyingAsset}),V=(0,m.U)($),G=(0,m.U)(H),K=(0,l.O)(k.marketReferenceCurrencyValue).plus((0,l.O)(T||0).multipliedBy(k.token0.priceInMarketReferenceCurrency)).plus((0,l.O)(_||0).multipliedBy(k.token1.priceInMarketReferenceCurrency)).toFixed(),Q=(0,l.O)(K).multipliedBy(k.liquidationThreshold).div(k.marketReferenceCurrencyDebt||0).toFixed(),J=(0,l.O)(T||0).multipliedBy((0,l.O)(10).pow(k.token0.decimals||0)),X=(0,l.O)(_||0).multipliedBy((0,l.O)(10).pow(k.token1.decimals||0)),ee={enrichedPosition:k,tokenA:$,tokenB:H,amountToIncreaseA:J,amountToIncreaseB:X,isWrongNetwork:C},te=(0,b.K5)(W,(0,o.useMemo)((function(){return[V,G]}),[null===V||void 0===V?void 0:V.symbol,null===G||void 0===G?void 0:G.symbol])),ne=(t={},(0,r.Z)(t,O.g.CURRENCY_A,te[0]),(0,r.Z)(t,O.g.CURRENCY_B,te[1]),t),re=(n={},(0,r.Z)(n,O.g.CURRENCY_A,(0,l.O)(T).multipliedBy(k.token0.priceInMarketReferenceCurrency)),(0,r.Z)(n,O.g.CURRENCY_B,(0,l.O)(_).multipliedBy(k.token1.priceInMarketReferenceCurrency)),n),oe=re[O.g.CURRENCY_A],ie=re[O.g.CURRENCY_B],ae=function(e){w(O.g.CURRENCY_A),I(e),S(U(k,e,O.g.CURRENCY_B)||"")},se=function(e){w(O.g.CURRENCY_B),S(e),I(U(k,e,O.g.CURRENCY_A)||"")};return(0,o.useEffect)((function(){R===O.g.CURRENCY_A&&S(U(k,T,O.g.CURRENCY_B)||""),R===O.g.CURRENCY_B&&I(U(k,_,O.g.CURRENCY_A)||"")}),[k.poolPrice]),q.success?(0,L.jsx)(s.mf,{children:(0,L.jsx)(A.R,{action:(0,L.jsx)(c.cC,{id:"successfully compounded"}),prefix:"$",amount:q.value})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(s.mf,{sx:{pt:4},children:[(0,L.jsx)(d.Z,{variant:"secondary14",color:"text.tertiary",children:"Liquidity to add"}),(0,L.jsxs)(p.Z,{sx:{mt:2},children:[(0,L.jsx)(f.t,{id:"add-liquidity-input-tokena",value:T,iconSymbol:null===(a=k.token0)||void 0===a?void 0:a.iconSymbol,onUserInput:ae,onMax:function(){var e,t;ae(null!==(e=null===(t=ne[O.g.CURRENCY_A])||void 0===t?void 0:t.toFixed())&&void 0!==e?e:"")},showMaxButton:Boolean(te[0]),currency:V,fiatValue:oe.isFinite()?null===oe||void 0===oe?void 0:oe.toFixed(2):void 0,sx:{borderRadius:"8px 8px 0 0"},showCommonBases:!0,disableErrors:!0,disabled:k.poolPrice.isGreaterThanOrEqualTo(k.upperPosition)}),(0,L.jsx)(f.t,{id:"add-liquidity-input-tokenb",value:_,iconSymbol:null===(u=k.token1)||void 0===u?void 0:u.iconSymbol,onUserInput:se,onMax:function(){var e,t;se(null!==(e=null===(t=ne[O.g.CURRENCY_B])||void 0===t?void 0:t.toFixed())&&void 0!==e?e:"")},showMaxButton:Boolean(te[1]),fiatValue:ie.isFinite()?null===ie||void 0===ie?void 0:ie.toFixed(2):void 0,currency:G,sx:{borderRadius:"0 0 8px 8px"},showCommonBases:!0,disableErrors:!0,disabled:k.poolPrice.isLessThanOrEqualTo(k.lowerPosition)})]}),(0,L.jsxs)(h.m6,{description:j.U,gasLimit:N,skipLoad:!0,children:[(0,L.jsx)(h.oD,{description:"Total position liquidity",value:K,numberPrefix:"$"}),(0,L.jsx)(h.oD,{description:"Health factor",value:k.healthFactor,futureValue:Q,visibleDecimals:2})]}),D&&(0,L.jsx)(g.Y,{variant:"error",txError:D,onClose:function(){return Y(void 0)}})]}),(0,L.jsx)(s.Ys,{children:(0,L.jsx)(M,F({},ee))})]})}));function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W=function(){var e=(0,i.vR)(),t=e.type,n=e.args,o=e.close;return(0,L.jsxs)(s.XC,{open:t===i.w8.AddLiquidity,setOpen:o,children:[(0,L.jsx)(u.o,{positionAddress:n.positionAddress,title:"Add liquidity",modernStyle:!0,children:function(e){return(0,L.jsx)(Y,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}}),(0,L.jsx)(a.v,{})]})}},77642:function(e,t,n){n.d(t,{U:function(){return r}});var r="Added amounts may be lower than displayed due to slippage, any differences will be refunded to wallet within the same transaction"},48321:function(e,t,n){n.d(t,{pQ:function(){return i},Fi:function(){return a},iv:function(){return s},Vc:function(){return u},yI:function(){return c}});n(70794);var r,o=n(29946);!function(e){e[e.SUPPLY_CAP_REACHED=0]="SUPPLY_CAP_REACHED",e[e.HF_BELOW_ONE=1]="HF_BELOW_ONE",e[e.NOT_ENOUGH_COLLATERAL_TO_REPAY_WITH=2]="NOT_ENOUGH_COLLATERAL_TO_REPAY_WITH",e[e.ZERO_LTV_WITHDRAW_BLOCKED=3]="ZERO_LTV_WITHDRAW_BLOCKED"}(r||(r={}));var i=65e3,a=55e3,s=function(e){var t=e.approvedAmount,n=e.signedAmount,r=e.amount;return!("-1"===t||"0"!==t&&Number(t)>=Number(r)||Number(n)>=Number(r))},u=function(e){var t=[];return e.userReservesData.forEach((function(e){Number(e.scaledYTokenBalance)>0&&"0"===e.reserve.baseLTVasCollateral&&e.usageAsCollateralEnabledOnUser&&"0"!==e.reserve.reserveLiquidationThreshold&&t.push(e.reserve.symbol)})),t},c=function(e){if(!e.reserve.usageAsCollateralEnabled)return o.z.UNAVAILABLE;o.z.ENABLED;return e&&"0"!==e.scaledYTokenBalance?e.usageAsCollateralEnabledOnUser?o.z.ENABLED:o.z.DISABLED:o.z.ENABLED}},56365:function(e,t,n){var r=n(67294);const o=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"}))}));t.Z=o},71383:function(e,t,n){function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return r}})},75932:function(e){e.exports=JSON.parse('{"Mt":[{"inputs":[],"name":"getCurrentBlockTimestamp","outputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getEthBalance","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"address","name":"target","type":"address"},{"internalType":"uint256","name":"gasLimit","type":"uint256"},{"internalType":"bytes","name":"callData","type":"bytes"}],"internalType":"struct UniswapInterfaceMulticall.Call[]","name":"calls","type":"tuple[]"}],"name":"multicall","outputs":[{"internalType":"uint256","name":"blockNumber","type":"uint256"},{"components":[{"internalType":"bool","name":"success","type":"bool"},{"internalType":"uint256","name":"gasUsed","type":"uint256"},{"internalType":"bytes","name":"returnData","type":"bytes"}],"internalType":"struct UniswapInterfaceMulticall.Result[]","name":"returnData","type":"tuple[]"}],"stateMutability":"nonpayable","type":"function"}]}')}}]);
//# sourceMappingURL=2921.80fd1f8cf2664aa5.js.map