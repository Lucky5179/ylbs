"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{88633:function(e,r,t){var n=t(64836);r.Z=void 0;var o=n(t(64938)),i=t(85893),c=(0,o.default)((0,i.jsx)("path",{d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23c-.25-.44-.79-.62-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41c-.02.22-.03.44-.03.67s.01.45.03.68l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68zm-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"}),"SettingsRounded");r.Z=c},44020:function(e,r,t){t.d(r,{X:function(){return x}});var n=t(59499),o=t(67294),i=t(61953),c=t(81138),s=t(88633),a=t(4530),u=t(24997),l=t(1390),p=t(85893);function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var x=function(e){var r,t,f,x,b=e.defaultOptions,y=e.value,v=e.onChange,m=e.sx,h=(0,o.useState)(!1),j=h[0],O=h[1],g=(0,o.useState)(""),P=g[0],w=g[1],S=(0,o.useRef)(null),Z=function(e){e&&v(e),w("")};return r=S,t=function(){return O(!1)},f=!P,(0,o.useEffect)((function(){var e=function(e){f&&r.current&&e.target&&!r.current.contains(e.target)&&(x&&e.stopPropagation(),t())};return document.addEventListener("click",e,!0),function(){return document.removeEventListener("click",e,!0)}}),[r,t,f]),(0,p.jsxs)(i.Z,{ref:S,sx:d({display:"flex",justifyContent:"space-between",alignItems:"center"},m),children:[(0,p.jsx)(c.Z,{variant:"secondary14",color:"text.tertiary",children:"Slippage tolerance"}),!j&&(0,p.jsxs)(i.Z,{sx:{display:"flex",gap:1.5,alignItems:"center"},children:[y&&(0,p.jsxs)(c.Z,{variant:"secondary14",color:"text.secondary",children:[y,"%"]}),(0,p.jsx)(s.Z,{onClick:function(){return O(!0)},sx:{width:"18px",height:"18px",color:"#8989A4",cursor:"pointer"}})]}),j&&(0,p.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:2},children:[(0,p.jsx)(a.t,{color:"primary",exclusive:!0,value:P?"":y,onChange:function(e,r){return Z(r)},sx:(0,n.Z)({height:"28px",flex:{xs:"1 1 auto",md:"unset"},width:{xs:"100%",md:"unset"},mb:{xs:1,md:"unset"},padding:"2px"},">button",{border:"none !important"}),children:b.map((function(e){return(0,p.jsxs)(u.C,{value:e,size:"small",sx:{minWidth:"30px"},children:[e,"%"]},e)}))}),(0,p.jsx)(i.Z,{sx:{display:"flex",alignItems:"center",height:"28px",px:2,borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.06)",backgroundColor:"#2A2A32",width:"70px"},children:(0,p.jsx)(l.A,{placeholder:"Custom",value:P,onChange:w,onBlur:function(){b.includes(P)&&w(""),P&&v(P)},isPercentage:!0,sx:{flex:1,fontSize:"13px"}})})]})]})}},24997:function(e,r,t){t.d(r,{C:function(){return u}});var n=t(59499),o=t(87054),i=t(77391),c=t(85893);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=function(e){return(0,c.jsx)(o.Z,a(a({},e),{},{sx:a((0,n.Z)({display:"flex",gap:1.5,border:"none",borderRadius:"5px !important"},"&.".concat(i.Z.disabled),{border:"unset !important"}),e.sx)}))}},92767:function(e,r,t){t.d(r,{p:function(){return f}});var n=t(90116),o=t(50029),i=t(17674),c=t(87794),s=t.n(c),a=t(67294),u=t(87899),l=t(77537),p=function(e){return new Promise((function(r,t){var n=!1,o=0;e.length||t(void 0),e.forEach((function(i){i.then((function(e){n||(n=!0,r(e))})).catch((function(){n||++o===e.length&&t()}))}))}))},f=function(){var e=(0,u.Yh)((function(e){return[e.currentMarketData]})),r=(0,i.Z)(e,1)[0],t=(0,l.Z)().provider;return(0,a.useCallback)(function(){var e=(0,o.Z)(s().mark((function e(i){var c,a,u,l,f,d,x,b;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.fn,a=i.args,u=r.addresses.FALLBACK_FLASHLOAN_PROVIDER,l=r.addresses.PREFERRED_FLASHLOAN_PROVIDERS,t){e.next=5;break}return e.abrupt("return",Promise.reject());case 5:return f=function(){var e=(0,o.Z)(s().mark((function e(r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.estimateGas(r);case 2:return n=e.sent,r.gasLimit=n.mul(115).div(100),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.prev=6,d=l.map((function(e){var r=c.apply(void 0,[e].concat((0,n.Z)(a)));return f(r)})),e.next=10,p(d);case 10:if(!(x=e.sent)){e.next=13;break}return e.abrupt("return",x);case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(6);case 17:return b=c.apply(void 0,[u].concat((0,n.Z)(a))),e.abrupt("return",f(b));case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(r){return e.apply(this,arguments)}}(),[t])}},35264:function(e,r,t){t.r(r),t.d(r,{ClosePositionModal:function(){return L}});var n=t(59499),o=t(67294),i=t(8195),c=t(88543),s=t(32369),a=t(17674),u=t(70794),l=t(51324),p=t(91555),f=t(44020),d=t(49486),x=t(21878),b=t(6751),y=t(31798),v=t(77642),m=t(50029),h=t(87794),j=t.n(h),O=t(72864),g=t(77537),P=t(87899),w=t(39771),S=t(31001),Z=t(92767),k=t(70574),E=t(85893);function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var T=o.memo((function(e){var r=e.marketId,t=e.isWrongNetwork,n=e.positionAddress,c=e.slippage,s=e.controlType,u=(0,Z.p)(),l=(0,i.vR)(),p=l.mainTxState,f=l.setMainTxState,x=l.setTxError,b=l.setGasLimit,y=(0,g.Z)().sendTx,v=(0,P.Yh)((function(e){return[e.closePosition,e.closeAlmPosition]})),h=(0,a.Z)(v,2),C=h[0],T=h[1],A=function(){var e=(0,m.Z)(j().mark((function e(){var t,o,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&n&&!p.success){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,window.gtag("event","close_position_modal"),x(void 0),f(D(D({},p),{},{loading:!0})),e.next=8,u({fn:s===d.N3.AlmPosition?T:C,args:[r,n,c]});case 8:return t=e.sent,e.next=11,y(t);case 11:return o=e.sent,e.next=14,o.wait(1);case 14:f({txHash:o.hash,loading:!1,success:!0}),O.queryClient.invalidateQueries({queryKey:[S.iP.POSITIONS]}),O.queryClient.invalidateQueries({queryKey:[S.iP.POSITIONS_DATA]}),O.queryClient.invalidateQueries({queryKey:[S.iP.LEVERAGED_POSITIONS]}),O.queryClient.invalidateQueries({queryKey:[S.iP.LEVERAGED_POSITIONS_DATA]}),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(2),i=(0,w.WG)(e.t0,w.aD.GAS_ESTIMATION,!1),x(i),f({txHash:void 0,loading:!1});case 26:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){if(r&&n&&!p.success){var e=function(){var e=(0,m.Z)(j().mark((function e(){var t,o;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({fn:s===d.N3.AlmPosition?T:C,args:[r,n,c]});case 2:o=e.sent,b((null===(t=o.gasLimit)||void 0===t?void 0:t.toString())||"0");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=setTimeout(e,500),o=setInterval(e,15e3);return function(){clearInterval(o),clearTimeout(t)}}}),[p.success]),(0,E.jsx)(k.v,{mainTxState:p,isWrongNetwork:t,requiresAmount:!0,preparingTransactions:!1,actionText:"Close position",actionInProgressText:"Closing Position",handleAction:A})}));function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var N=o.memo((function(e){var r=e.enrichedPosition,t=e.positionAddress,n=e.isWrongNetwork,s=e.controlType,m=o.useState(p.P0[0]),h=(0,a.Z)(m,2),j=h[0],O=h[1],g=(0,o.useState)(""),P=g[0],w=g[1],S=(0,i.vR)(),Z=S.gasLimit,k=S.txError,C=S.mainTxState,D=S.setTxError,A={marketId:r.marketId,slippage:(0,u.O)(j).multipliedBy(100).toNumber(),controlType:s,isWrongNetwork:n,positionAddress:t};return(0,o.useEffect)((function(){w(null===r||void 0===r?void 0:r.marketReferenceCurrencyValue.toFixed(2))}),[]),C.success?(0,E.jsx)(c.mf,{children:(0,E.jsx)(b.R,{action:"Close position",customText:"\n              You have closed\n              ".concat(null===r||void 0===r?void 0:r.token0.symbol," / ").concat(null===r||void 0===r?void 0:r.token1.symbol,"\n              position for $").concat(P,"\n            ")})}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(c.mf,{children:[(0,E.jsx)(y.p,{token0:r.token0,token1:r.token1}),(0,E.jsxs)(x.m6,{description:v.U,gasLimit:Z,skipLoad:!0,bottomSlot:(0,E.jsx)(f.X,{defaultOptions:p.P0,value:j,onChange:O}),children:[(0,E.jsx)(x.oD,{description:"Total liquidity to withdraw",value:r.marketReferenceCurrencyValue,numberPrefix:"$"}),s===d.N3.ManualPosition&&(0,E.jsx)(x.oD,{description:"Fees earned",value:r.token0.marketReferenceCurrencyFee+r.token1.marketReferenceCurrencyFee,numberPrefix:"$"})]}),k&&(0,E.jsx)(l.Y,{variant:"error",txError:k,onClose:function(){return D(void 0)}})]}),(0,E.jsx)(c.Ys,{children:(0,E.jsx)(T,R({},A))})]})}));function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var L=function(){var e=(0,i.vR)(),r=e.type,t=e.args,o=e.close;return(0,E.jsx)(c.XC,{open:r===i.w8.ClosePosition,setOpen:o,children:(0,E.jsx)(s.o,{positionAddress:t.positionAddress,title:"Close position",modernStyle:!0,controlType:t.controlType,children:function(e){return(0,E.jsx)(N,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({controlType:t.controlType},e))}})})}},31798:function(e,r,t){t.d(r,{p:function(){return u}});var n=t(49501),o=t(61953),i=t(81138),c=(t(67294),t(72667)),s=t(2802),a=t(85893),u=function(e){var r=e.token0,t=e.token1;return(0,a.jsxs)(o.Z,{sx:{pt:5},children:[(0,a.jsx)(i.Z,{sx:{mb:1},color:"text.secondary",children:(0,a.jsx)(n.cC,{id:"Position Liquidity"})}),(0,a.jsxs)(o.Z,{sx:function(e){return{display:"flex",justifyContent:"space-between",p:3,border:"1px solid ".concat(e.palette.divider),borderRadius:"8px 8px 0 0",".MuiBox-root:last-of-type":{mb:0}}},children:[(0,a.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(c.T1,{symbol:r.iconSymbol,fontSize:"large"}),(0,a.jsxs)(o.Z,{sx:{pl:2,overflow:"hidden"},children:[(0,a.jsx)(i.Z,{variant:"h4",noWrap:!0,children:r.name}),(0,a.jsx)(o.Z,{sx:{p:{xs:"0",xsm:"2px 0px"}},children:(0,a.jsx)(i.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:r.symbol})})]})]}),(0,a.jsxs)(o.Z,{sx:{textAlign:"right"},children:[(0,a.jsx)(i.Z,{variant:"h4",noWrap:!0,children:(0,s.d)(r.liquidity)}),(0,a.jsxs)(i.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:["$",r.marketReferenceCurrencyValue.toFixed(2)]})]})]}),(0,a.jsxs)(o.Z,{sx:function(e){return{display:"flex",justifyContent:"space-between",p:3,border:"1px solid ".concat(e.palette.divider),borderTop:"unset",borderRadius:"0 0 8px 8px",".MuiBox-root:last-of-type":{mb:0}}},children:[(0,a.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(c.T1,{symbol:t.iconSymbol,fontSize:"large"}),(0,a.jsxs)(o.Z,{sx:{pl:2,overflow:"hidden"},children:[(0,a.jsx)(i.Z,{variant:"h4",noWrap:!0,children:t.name}),(0,a.jsx)(o.Z,{sx:{p:{xs:"0",xsm:"2px 0px"}},children:(0,a.jsx)(i.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:t.symbol})})]})]}),(0,a.jsxs)(o.Z,{sx:{textAlign:"right"},children:[(0,a.jsx)(i.Z,{variant:"h4",noWrap:!0,children:(0,s.d)(t.liquidity)}),(0,a.jsxs)(i.Z,{variant:"subheader2",color:"text.muted",noWrap:!0,children:["$",t.marketReferenceCurrencyValue.toFixed(2)]})]})]})]})}},77642:function(e,r,t){t.d(r,{U:function(){return n}});var n="Added amounts may be lower than displayed due to slippage, any differences will be refunded to wallet within the same transaction"},1390:function(e,r,t){t.d(r,{A:function(){return f}});var n=t(59499),o=t(4730),i=t(67294),c=t(81011),s=t(32295),a=t(85893),u=["minValue","maxValue","value","isPercentage","onChange","onBlur","decimalPlaces","sx"];function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=function(e){var r=e.minValue,t=e.maxValue,n=e.value,l=e.isPercentage,f=e.onChange,d=e.onBlur,x=e.decimalPlaces,b=e.sx,y=(0,o.Z)(e,u),v=(0,i.useRef)(null);return(0,a.jsx)(c.ZP,p({inputRef:v,value:"".concat(n).concat(l?"%":""),onChange:function(e){var n=e.currentTarget.value.replace(/[^\d.,-]/g,"").replace(",",".");if((0,s.i)(n.replace("-",""),x)){if(t&&t>0){var o=Number(n)>t?t.toString():n;f(o)}else if(r&&r<0){var i=Number(n)<r?r.toString():n;f(i)}else f(n);setTimeout((function(){if(v.current){var e=n.length;v.current.selectionStart=e,v.current.selectionEnd=e}}),0)}},onBlur:function(){if(r&&r>0){var e=Number(n)<r||isNaN(parseFloat(n))?r.toString():n;f(e)}if(t&&t<0){var o=Number(n)>t||isNaN(parseFloat(n))?t.toString():n;f(o)}null===d||void 0===d||d()},onFocus:function(){setTimeout((function(){if(v.current){var e=n.toString().length;v.current.selectionStart=e,v.current.selectionEnd=e}}),0)},sx:p({fontSize:"15px"},b)},y))}},4530:function(e,r,t){t.d(r,{t:function(){return l}});var n=t(59499),o=t(4730),i=t(85390),c=t(85893),s=["children","sx"];function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var l=function(e){var r=e.children,t=e.sx,n=(0,o.Z)(e,s);return(0,c.jsx)(i.Z,u(u({},n),{},{sx:u({flex:{xs:"1 1 auto",md:"unset"},width:{xs:"100%",md:"unset"},padding:"3px",gap:1,borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.06)",backgroundColor:"#26262B"},t),children:r}))}},2802:function(e,r,t){t.d(r,{d:function(){return o}});var n=t(70794),o=function(e){if(!e)return"0";var r=(0,n.Z)(e);return r.abs().isLessThan(.1)?r.toFixed(8):r.abs().isLessThan(10)?r.toFixed(4):r.toFixed(2)}},32295:function(e,r,t){t.d(r,{i:function(){return n}});var n=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=new RegExp("^(?!0[0-9])[0-9]+[.,]?[0-9]{0,".concat(r,"}$"),"g");return(null===e||void 0===e?void 0:e.match(t))&&e.length<=79||!e.length}},69921:function(e,r){var t,n=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.server_context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var r=e.$$typeof;switch(r){case n:switch(e=e.type){case i:case s:case c:case f:case d:return e;default:switch(e=e&&e.$$typeof){case l:case u:case p:case b:case x:case a:return e;default:return r}}case o:return r}}}t=Symbol.for("react.module.reference")},59864:function(e,r,t){t(69921)}}]);
//# sourceMappingURL=640.997d12a6f294441e.js.map