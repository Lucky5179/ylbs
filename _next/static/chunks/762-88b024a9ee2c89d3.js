"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{70253:function(e,r,t){t.d(r,{o:function(){return O}});var n=t(17674),o=t(70794),i=t(49486),a=t(33246),u=t(38210),c=t(37322),d=t(61722),s=function(e,r,t){var n=(0,c.m)(r,t,e);return(0,d.p)({amountToBorrow:n,tokenToBorrow:t})},l=t(59922),p=t(62330),f=t(30820),v=t(87899),y=t(18528),m=t(71467),b=t(14918),O=function(e){var r,t=e.position,c=e.autoCompoundInitialized,d=e.autoCompoundValue,O=(0,v.Yh)((function(e){return e.currentNetworkConfig})),g=(0,m.HT)(),k=g.reserves,h=g.loading,w=(0,a.z)({marketId:null===t||void 0===t?void 0:t.marketId,token0:null===t||void 0===t?void 0:t.token0.underlyingAsset,token1:null===t||void 0===t?void 0:t.token1.underlyingAsset,feeAmount:null===t||void 0===t?void 0:t.feeAmount,enabled:(null===t||void 0===t?void 0:t.type)!==i.Tw.Pool}),P=w.data,j=w.isLoading,Z=(0,l.B)(),B=Z.data,A=Z.isLoading,R=(0,b.A)({strategyProvider:null===t||void 0===t||null===(r=t.almMarket)||void 0===r?void 0:r.marketName,poolAddress:null===t||void 0===t?void 0:t.vault}),C=R.data,D=R.isLoading,_=(0,o.Z)((null===t||void 0===t?void 0:t.token0.netWorthUsd)||0).plus((null===t||void 0===t?void 0:t.token1.netWorthUsd)||0).toNumber(),N=function(){if(!t)return[0,0,0];var e=(0,u.Z)(P,(0,o.Z)(t.liquidity.toString()));if(t.type===i.Tw.Pool)return[t.maxApr||0,0,0];if(t.controlType===i.N3.AlmPosition)return[(0,o.Z)((0,o.Z)(t.marketReferenceCurrencyValue||0).multipliedBy((null===C||void 0===C?void 0:C.apr)||0).minus((0,o.Z)(t.marketReferenceCurrencyDebt||0).multipliedBy(t.borrowApy||0))).div((0,o.Z)(t.marketReferenceCurrencyValue||0).minus(t.marketReferenceCurrencyDebt||0)).div(100).toNumber(),t.marketReferenceCurrencyDebt?(0,o.Z)(t.marketReferenceCurrencyDebt||0).multipliedBy(t.borrowApy||0).div(_).toNumber():0,0];if(e){if(t.type===i.Tw.LeveragedPosition){var r=t.marketReferenceCurrencyDebt?(0,o.Z)(t.marketReferenceCurrencyDebt||0).multipliedBy(t.borrowApy||0).div(_).toNumber():0,n=t.positionInRange?e.div(_).toNumber():0;return[n,r,(0,o.Z)(n).multipliedBy((0,o.Z)(t.revenueFeePercent||0)).div(1e4).toNumber()]}if(t.type===i.Tw.Position){var a,c=t.positionInRange?e.div(_):(0,o.Z)(0),d=t.token0.availableLeverage,l=t.token1.availableLeverage,f=t.positionInRange?c.multipliedBy(d):(0,o.Z)(0),v=t.positionInRange?c.multipliedBy(l):(0,o.Z)(0),m=(0,y.v)({reserves:k,address:t.token0.underlyingAsset}),b=(0,y.v)({reserves:k,address:t.token1.underlyingAsset}),O=(0,o.Z)(s(d,t,m)).multipliedBy(d-1).dividedBy(100),g=(0,o.Z)(s(l,t,b)).multipliedBy(l-1).dividedBy(100),h=null===(a=B.find((function(e){return e.marketName===p.Z4.Uniswap})))||void 0===a?void 0:a.revenueFee,w=(0,o.Z)(h||0).multipliedBy(d-1).dividedBy(d),j=(0,o.Z)(h||0).multipliedBy(l-1).dividedBy(l),Z=f.multipliedBy(w).dividedBy(1e4),A=v.multipliedBy(j).dividedBy(1e4),R=f.minus(O).minus(Z),D=v.minus(g).minus(A),N=o.Z.max(R,D,c);return N.isEqualTo(R)?[f.toNumber(),O.toNumber(),Z.toNumber()]:N.isEqualTo(D)?[v.toNumber(),g.toNumber(),A.toNumber()]:[c.toNumber(),0,0]}}return[0,0,0]}(),S=(0,n.Z)(N,3),I=S[0],E=S[1],L=S[2],F=(0,f.F)({positionApr:I-L,borrowed:null===t||void 0===t?void 0:t.marketReferenceCurrencyDebt,positionValue:null===t||void 0===t?void 0:t.marketReferenceCurrencyValue,compoundGasCost:O.compoundGasCost,compoundCostCap:Number(d)}),q=I-E-L,x=c&&null!==t&&void 0!==t&&t.positionInRange?F.apr/100+E+L:I;return{estNetApr:c&&null!==t&&void 0!==t&&t.positionInRange?F.apr/100:q,estApr:x,netWorthUsd:_,borrowApy:E,revenueFee:L,isLoading:j||A||h||D}}},14918:function(e,r,t){t.d(r,{A:function(){return C}});var n=t(59499),o=t(4730),i=t(73502),a=t(50029),u=t(87794),c=t.n(u),d=t(17e3),s=t(31001),l=t(46930),p=["data"];function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var v=function(){var e=(0,a.Z)(c().mark((function e(r){var t,n,o,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.vaultAddress,n=r.chainId,e.prev=1,o="https://api.steer.finance/pool/fee-apr?address=".concat(t,"&chain=").concat(n,"&interval=604800"),e.next=5,fetch(o);case 5:return i=e.sent,e.next=8,i.json();case 8:return a=e.sent,e.abrupt("return",a);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(r){return e.apply(this,arguments)}}(),y={apr:0,vaultAddress:""},m=function(e){var r=e.vaultAddress,t=e.enabled,i=(0,l.f)().currentChainId,a=(0,d.a)({queryKey:[s.iP.STEER_POOL_APR,i,r],queryFn:function(){return v({chainId:i,vaultAddress:r})},select:function(e){return{vaultAddress:r||"",apr:(null===e||void 0===e?void 0:e.apr.apr)||0}},enabled:t&&Boolean(i&&r),refetchInterval:s.g_}),u=a.data,c=(0,o.Z)(a,p);return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({data:u||y},c)},b=t(17674),O=t(70794),g=t(65216),k=["data"];function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var w=function(){var e=(0,a.Z)(c().mark((function e(){var r,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://wire2.gamma.xyz/quickswap/polygon/hypervisors/feeReturns/daily",e.next=4,fetch("https://wire2.gamma.xyz/quickswap/polygon/hypervisors/feeReturns/daily");case 4:return r=e.sent,e.next=7,r.json();case 7:return t=e.sent,e.abrupt("return",t);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),P={apr:0,vaultAddress:""},j=function(e){var r=e.vaultAddress,t=e.enabled,i=void 0===t||t,a=(0,l.f)().currentChainId,u=(0,d.a)({queryKey:[s.iP.GAMMA_POOL_APR,a,r],queryFn:w,select:function(e){var t,n=null===(t=Object.entries(e).find((function(e){var t=(0,b.Z)(e,1)[0];return(0,g.toChecksumAddress)(t)===(0,g.toChecksumAddress)(r||"")})))||void 0===t?void 0:t[1].feeApy;return{vaultAddress:r||"",apr:(0,O.Z)(n||0).multipliedBy(100).toNumber()}},enabled:i&&Boolean(a&&r),refetchInterval:s.g_}),c=u.data,p=(0,o.Z)(u,k);return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({data:c||P},p)},Z=["data"],B=["data"];function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var C=function(e){var r=e.strategyProvider,t=e.poolAddress,n=m({vaultAddress:t,enabled:r===i.f6.Steer}),a=n.data,u=(0,o.Z)(n,Z),c=j({vaultAddress:t,enabled:r===i.f6.Gamma}),d=c.data,s=(0,o.Z)(c,B);switch(r){case i.f6.Steer:return R({data:a},u);case i.f6.Gamma:return R({data:d},s);default:return{data:{apr:0,vaultAddress:""},isLoading:!1}}}},59922:function(e,r,t){t.d(r,{B:function(){return v}});var n=t(59499),o=t(4730),i=t(17674),a=t(17e3),u=t(70794),c=t(31001),d=t(13613),s=t(87899),l=["data"];function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var f=[],v=function(){var e=(0,d.z)().uiLeveragePositionService,r=(0,s.Yh)((function(e){return[e.currentChainId,e.isMarketsReady,e.getCurrentChainMarketData()]})),t=(0,i.Z)(r,3),v=t[0],y=t[1],m=t[2],b=(0,a.a)({queryFn:function(){var r=m.map((function(r){return e.getGlobalRevenueFee(v,r.addresses.leverageDataProviderAddress)}));return Promise.all(r)},queryKey:[c.iP.GLOBAL_REVENUE_FEES,v],enabled:Boolean(m)&&y,refetchInterval:c.g_,select:function(e){return e.map((function(e,r){return{chainId:v,marketId:m[r].marketId,marketName:m[r].marketName,revenueFee:(0,u.O)(e.toString())}}))}}),O=b.data,g=(0,o.Z)(b,l);return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({data:O||f},g)}},33246:function(e,r,t){t.d(r,{z:function(){return y}});var n=t(59499),o=t(4730),i=t(50029),a=t(87794),u=t.n(a),c=t(17e3),d=t(31001),s=t(46930),l=["data"];function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var f=function(){var e=(0,i.Z)(u().mark((function e(r){var t,n,o,i,a,c,d,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.endpointURL,n=r.marketId,o=r.token0,i=r.token1,a=r.fee,e.prev=1,c="".concat(t,"/concentrated_liquidity/pool?token_0=").concat(o,"&token_1=").concat(i,"&fee=").concat(a,"&market_id=").concat(n),e.next=5,fetch(c);case 5:return d=e.sent,e.next=8,d.json();case 8:return s=e.sent,e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(r){return e.apply(this,arguments)}}(),v={},y=function(e){var r=e.marketId,t=e.token0,i=e.token1,a=e.feeAmount,u=void 0===a?0:a,y=e.enabled,m=void 0===y||y,b=(0,s.f)().currentNetworkConfig.yldrYpiUrl,O=(0,c.a)({queryKey:[d.iP.LP_POOL,r,t,i,u],queryFn:function(){return f({endpointURL:b,marketId:r,token0:t,token1:i,fee:u})},enabled:m&&Boolean(r&&t&&i),refetchInterval:d.hB}),g=O.data,k=(0,o.Z)(O,l);return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({data:g||v},k)}},30820:function(e,r,t){t.d(r,{F:function(){return n}});var n=function(e){var r=e.positionApr,t=e.borrowed,n=e.positionValue,o=e.compoundGasCost,i=e.compoundCostCap;if(!r||!t||!n||!o||!i)return{apr:0,compounds:0,compoundCost:0};for(var a=t,u=n,c=0,d=0,s=0,l=n-t,p=0;p<8760;p++){var f=.1*a/100+o,v=(c+=100*r*(u-a)/876e3)*i/100;f<=v&&(f=v,s||(s=f),u+=c,a+=f,c=0,d+=1)}return{apr:(u+c-a-l)/l*100,compounds:d,compoundCost:s}}},38210:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(70794),o=function(e,r){return e.estimated_usd_fees_per_day&&e.liquidity&&!r.isNaN()&&!r.isZero()?(0,n.Z)(e.estimated_usd_fees_per_day).multipliedBy(365).multipliedBy(r).div((0,n.Z)(e.liquidity).plus(r)):(0,n.Z)(0)}},2802:function(e,r,t){t.d(r,{d:function(){return o}});var n=t(70794),o=function(e){if(!e)return"0";var r=(0,n.Z)(e);return r.abs().isLessThan(.1)?r.toFixed(8):r.abs().isLessThan(10)?r.toFixed(4):r.toFixed(2)}},37322:function(e,r,t){t.d(r,{m:function(){return o}});var n=t(70794),o=function(e,r,t){if(!r||!t)return(0,n.Z)(0);var o=r.priceInUSD,i=(0,n.Z)((null===e||void 0===e?void 0:e.marketReferenceCurrencyValue)||0).plus((null===e||void 0===e?void 0:e.token0.marketReferenceCurrencyFee)||0).plus((null===e||void 0===e?void 0:e.token1.marketReferenceCurrencyFee)||0),a=(0,n.Z)(t).minus((0,n.Z)(t).multipliedBy(.005)),u=i.multipliedBy(a.minus(1)).div(o).multipliedBy((0,n.Z)(10).pow(r.decimals)).minus(1).decimalPlaces(0);return u.isGreaterThan(0)?u:(0,n.Z)(0)}},61722:function(e,r,t){t.d(r,{p:function(){return c}});var n=t(70794),o=t(15060),i=t(37920),a=t(11288),u=t(80684),c=function(e){var r=e.amountToBorrow,t=e.tokenToBorrow;if(!t||!r)return(0,o.hE)(0).toString();var c=r.multipliedBy(t.priceInUSD).div((0,n.Z)(10).pow(t.decimals)),d=t.totalLiquidityUSD,s=(0,o.hE)(t.totalVariableDebtUSD).plus(c).multipliedBy(Math.pow(10,27)).div(d),l=(0,u.F)(t,s);return(0,o.Fv)((0,i.G)({rate:l,duration:a.E_}).multipliedBy(100),a.YL)}},80684:function(e,r,t){t.d(r,{F:function(){return o}});var n=t(87803),o=function(e,r){return(0,n.__)({variableRateSlope1:e.variableRateSlope1,variableRateSlope2:e.variableRateSlope2,optimalUsageRatio:e.optimalUsageRatio,baseVariableBorrowRate:e.baseVariableBorrowRate,usageRatio:r.toString()})}}}]);
//# sourceMappingURL=762-88b024a9ee2c89d3.js.map